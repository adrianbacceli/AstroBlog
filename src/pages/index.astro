---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection('posts', p => !p.data.draft))
  .sort((a,b)=> b.data.pubDate.getTime() - a.data.pubDate.getTime());
---
<BaseLayout title="Adrian Â· Security Blog" description="Minimalist IT/Cybersecurity writing">
  <section style="margin:1rem 0 2rem">
    <h1>Security Notes</h1>
    <p>Minimal, modern, business-focused writing on IT & Cybersecurity.</p>
  </section>

  <div style="display:grid; gap:1rem">
    {posts.map(({ slug, data }) => (
      <a href={`/posts/${slug}/`} class="card" style="padding:1rem; display:block">
        <div style="display:flex; justify-content:space-between; gap:.5rem; flex-wrap:wrap;">
          <strong style="font-size:1.1rem">{data.title}</strong>
          <span class="meta">{data.pubDate.toISOString().slice(0,10)}</span>
        </div>
        <p style="margin:.5rem 0 0">{data.description}</p>
      </a>
    ))}
  </div>
</BaseLayout>
